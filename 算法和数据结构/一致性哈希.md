# 一致性哈希算法

一致性哈希算法将整个哈希值空间映射成一个虚拟的圆环，整个哈希空间的取值范围为[0,2^32)，整个空间按顺时针方向组织，[0,2^32)在零点中方向重合。
接下来使用如下算法对服务请求进行映射，将服务请求使用哈希算法算出对应的hash值，然后根据hash值的位置沿圆环顺时针查找，
第一台遇到的服务器就是所对应的处理请求服务器。当增加一台新的服务器，受影响的数据仅仅是新添加的服务器到其环空间中前一台的服务器
（也就是顺着逆时针方向遇到的第一台服务器）之间的数据，其他都不会受到影响。综上所述，一致性哈希算法对于节点的增减都只需重定位环空间中的一小部分数据，
具有较好的容错性和可扩展性。相对简单hash方法而言，避免了缓存集群动态扩展、节点宕机而出现的大量缓存数据失效的情况。

## 算法步骤（以memcached为例）
- 首先求出memcached服务器（节点）的哈希值，并将其配置到[0,2^32)的圆上
- 然后采用同样的方法求出存储数据的键的哈希值，并映射到相同的圆上
- 然后从数据映射到的位置开始顺时针查找，将数据保存到找到的第一个服务器上，如果超过2^32仍然找不到服务器，就会保存到第一台memcached服务器上
